version: "3"

services:
  postgres-compose:
    container_name: postgres
    image: phdcoder/postgresbr
    restart: always
    volumes:
      - postgresql:/var/lib/postgresql/data/pgdata
      - ./initdb:/docker-entrypoint-initdb.d
    environment:
        POSTGRES_USER: app
        POSTGRES_DB: easysell
        POSTGRES_PASSWORD: app2022
        PGDATA: /var/lib/postgresql/data/pgdata
        LANG: pt_BR.utf8
    ports:
       - "5434:5432"
    networks:
      - postgresql


  pgadmin-compose:
    image: dpage/pgadmin4
    container_name: pgadmin
    environment:
      PGADMIN_DEFAULT_EMAIL: "exemple@exemple.com"
      PGADMIN_DEFAULT_PASSWORD: "melancia"
    ports:
      - "15432:80"
    depends_on:
      - postgres-compose
    networks:
      - postgresql
#  spring:
#    image: openjdk
#    container_name: springjdk
#    ports:
#      - 8080:8080
#    entrypoint: ["java","-jar","/app/app.jar"]
#    depends_on:
#      - postgres-compose
networks:
  postgresql:
    driver: bridge

volumes:
  postgresql:
    external: true